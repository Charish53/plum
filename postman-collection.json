{
  "info": {
    "name": "AI-Powered Amount Detection API",
    "description": "Complete API collection for testing the AI-Powered Amount Detection in Medical Documents system. This collection includes all OCR and Amount Extraction endpoints with sample requests and responses.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "noauth"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3002",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        },
        "description": "Check if the server is running and healthy"
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "cookie": [],
          "body": "{\n  \"status\": \"ok\",\n  \"timestamp\": \"2024-01-15T10:30:00.000Z\"\n}"
        }
      ]
    },
    {
      "name": "OCR Text Extraction",
      "item": [
        {
          "name": "OCR with Bounding Boxes",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": "/path/to/medical-bill.jpg",
                  "description": "Upload a medical bill image file (JPG, PNG, etc.)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ocr-with-boxes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ocr-with-boxes"]
            },
            "description": "Extract text from medical bill image with bounding box information"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "image",
                      "type": "file",
                      "src": "/path/to/medical-bill.jpg"
                    }
                  ]
                },
                "url": {
                  "raw": "{{baseUrl}}/api/ocr-with-boxes",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "ocr-with-boxes"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"fullText\": \"MEDICAL BILL\\nPatient: John Doe\\nDate: 2024-01-15\\n\\nRoom Rent: 4,000.00\\nConsultation: 500.00\\nMedicine: 1,200.00\\n\\nSubtotal: 5,700.00\\nTax (18%): 1,026.00\\nGrand Total: 6,726.00\\n\\nAmount Paid: 5,000.00\\nOutstanding: 1,726.00\",\n  \"textBoxes\": [\n    {\n      \"text\": \"MEDICAL BILL\",\n      \"confidence\": 0.98,\n      \"bbox\": [10, 20, 150, 40]\n    },\n    {\n      \"text\": \"Patient: John Doe\",\n      \"confidence\": 0.95,\n      \"bbox\": [10, 50, 200, 70]\n    },\n    {\n      \"text\": \"6,726.00\",\n      \"confidence\": 0.99,\n      \"bbox\": [300, 200, 400, 220]\n    }\n  ],\n  \"totalBoxes\": 25,\n  \"averageConfidence\": 0.89,\n  \"status\": \"success\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Amount Extraction",
      "item": [
        {
          "name": "Complete Pipeline",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"MEDICAL BILL\\nPatient: John Doe\\nDate: 2024-01-15\\n\\nRoom Rent: 4,000.00\\nConsultation: 500.00\\nMedicine: 1,200.00\\n\\nSubtotal: 5,700.00\\nTax (18%): 1,026.00\\nGrand Total: 6,726.00\\n\\nAmount Paid: 5,000.00\\nOutstanding: 1,726.00\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/amount-extraction/pipeline",
              "host": ["{{baseUrl}}"],
              "path": ["api", "amount-extraction", "pipeline"]
            },
            "description": "Run the complete 4-step amount extraction pipeline on text"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"text\": \"MEDICAL BILL\\nPatient: John Doe\\nDate: 2024-01-15\\n\\nRoom Rent: 4,000.00\\nConsultation: 500.00\\nMedicine: 1,200.00\\n\\nSubtotal: 5,700.00\\nTax (18%): 1,026.00\\nGrand Total: 6,726.00\\n\\nAmount Paid: 5,000.00\\nOutstanding: 1,726.00\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/amount-extraction/pipeline",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "amount-extraction", "pipeline"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"status\": \"success\",\n  \"pipeline\": \"complete\",\n  \"result\": {\n    \"currency\": \"INR\",\n    \"amounts\": [\n      {\n        \"type\": \"total_bill\",\n        \"value\": 6726,\n        \"source\": \"text: 'Grand Total: 6,726.00'\"\n      },\n      {\n        \"type\": \"paid\",\n        \"value\": 5000,\n        \"source\": \"text: 'Amount Paid: 5,000.00'\"\n      },\n      {\n        \"type\": \"due\",\n        \"value\": 1726,\n        \"source\": \"text: 'Outstanding: 1,726.00'\"\n      },\n      {\n        \"type\": \"tax\",\n        \"value\": 1026,\n        \"source\": \"text: 'Tax (18%): 1,026.00'\"\n      },\n      {\n        \"type\": \"subtotal\",\n        \"value\": 5700,\n        \"source\": \"text: 'Subtotal: 5,700.00'\"\n      }\n    ],\n    \"status\": \"ok\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Step 1: Raw Token Extraction",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Total Bill: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/amount-extraction/step1",
              "host": ["{{baseUrl}}"],
              "path": ["api", "amount-extraction", "step1"]
            },
            "description": "Extract raw numeric tokens and currency hints from text"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"text\": \"Total Bill: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/amount-extraction/step1",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "amount-extraction", "step1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"status\": \"success\",\n  \"step\": 1,\n  \"result\": {\n    \"raw_tokens\": [\"1500.00\", \"1000.00\", \"500.00\"],\n    \"currency_hint\": \"INR\",\n    \"confidence\": 0.85\n  }\n}"
            }
          ]
        },
        {
          "name": "Step 2: Amount Normalization",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Total Bill: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/amount-extraction/step2",
              "host": ["{{baseUrl}}"],
              "path": ["api", "amount-extraction", "step2"]
            },
            "description": "Normalize amounts and correct OCR errors"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"text\": \"Total Bill: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/amount-extraction/step2",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "amount-extraction", "step2"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"status\": \"success\",\n  \"step\": 2,\n  \"result\": {\n    \"normalized_amounts\": [1500, 1000, 500],\n    \"normalization_confidence\": 0.9\n  },\n  \"raw_tokens\": [\"1500.00\", \"1000.00\", \"500.00\"]\n}"
            }
          ]
        },
        {
          "name": "Step 3: Context Classification",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Total Bill: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/amount-extraction/step3",
              "host": ["{{baseUrl}}"],
              "path": ["api", "amount-extraction", "step3"]
            },
            "description": "Classify amounts by their context (total, paid, due, etc.)"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"text\": \"Total Bill: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/amount-extraction/step3",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "amount-extraction", "step3"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"status\": \"success\",\n  \"step\": 3,\n  \"result\": {\n    \"amounts\": [\n      {\n        \"type\": \"total_bill\",\n        \"value\": 1500,\n        \"entity\": \"Total Bill\"\n      },\n      {\n        \"type\": \"paid\",\n        \"value\": 1000,\n        \"entity\": \"Paid\"\n      },\n      {\n        \"type\": \"due\",\n        \"value\": 500,\n        \"entity\": \"Due\"\n      }\n    ],\n    \"confidence\": 0.85\n  },\n  \"raw_tokens\": [\"1500.00\", \"1000.00\", \"500.00\"],\n  \"normalized_amounts\": [1500, 1000, 500]\n}"
            }
          ]
        },
        {
          "name": "Step 4: Final Output Generation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Total Bill: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/amount-extraction/step4",
              "host": ["{{baseUrl}}"],
              "path": ["api", "amount-extraction", "step4"]
            },
            "description": "Generate final structured output with source tracking"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"text\": \"Total Bill: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/api/amount-extraction/step4",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "amount-extraction", "step4"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"status\": \"success\",\n  \"step\": 4,\n  \"result\": {\n    \"currency\": \"INR\",\n    \"amounts\": [\n      {\n        \"type\": \"total_bill\",\n        \"value\": 1500,\n        \"source\": \"text: 'Total Bill: 1500.00'\"\n      },\n      {\n        \"type\": \"paid\",\n        \"value\": 1000,\n        \"source\": \"text: 'Paid: 1000.00'\"\n      },\n      {\n        \"type\": \"due\",\n        \"value\": 500,\n        \"source\": \"text: 'Due: 500.00'\"\n      }\n    ],\n    \"status\": \"ok\"\n  },\n  \"raw_tokens\": [\"1500.00\", \"1000.00\", \"500.00\"],\n  \"normalized_amounts\": [1500, 1000, 500],\n  \"classified_amounts\": [\n    {\n      \"type\": \"total_bill\",\n      \"value\": 1500,\n      \"entity\": \"Total Bill\"\n    },\n    {\n      \"type\": \"paid\",\n      \"value\": 1000,\n      \"entity\": \"Paid\"\n    },\n    {\n      \"type\": \"due\",\n      \"value\": 500,\n      \"entity\": \"Due\"\n    }\n  ]\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Sample Medical Bill Text",
      "item": [
        {
          "name": "Simple Bill",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Total: 1500.00, Paid: 1000.00, Due: 500.00\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/amount-extraction/pipeline",
              "host": ["{{baseUrl}}"],
              "path": ["api", "amount-extraction", "pipeline"]
            },
            "description": "Test with simple medical bill text"
          }
        },
        {
          "name": "Complex Medical Bill",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"MEDICAL BILL\\nPatient: John Doe\\nDate: 2024-01-15\\n\\nRoom Rent: 4,000.00\\nConsultation: 500.00\\nMedicine: 1,200.00\\nLab Tests: 800.00\\n\\nSubtotal: 6,500.00\\nGST (18%): 1,170.00\\nGrand Total: 7,670.00\\n\\nAmount Paid: 5,000.00\\nOutstanding: 2,670.00\\n\\nPayment Method: Cash\\nThank you for your visit!\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/amount-extraction/pipeline",
              "host": ["{{baseUrl}}"],
              "path": ["api", "amount-extraction", "pipeline"]
            },
            "description": "Test with complex medical bill containing multiple services and taxes"
          }
        },
        {
          "name": "Bill with Discounts",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"MEDICAL BILL\\nPatient: Jane Smith\\nDate: 2024-01-20\\n\\nConsultation: 800.00\\nMedicine: 1,500.00\\n\\nSubtotal: 2,300.00\\nSenior Citizen Discount (10%): -230.00\\nGST (18%): 372.60\\n\\nGrand Total: 2,442.60\\n\\nAmount Paid: 2,442.60\\nOutstanding: 0.00\\n\\nPayment Method: Card\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/api/amount-extraction/pipeline",
              "host": ["{{baseUrl}}"],
              "path": ["api", "amount-extraction", "pipeline"]
            },
            "description": "Test with medical bill containing discounts and special offers"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set timestamp for requests",
          "pm.globals.set('timestamp', new Date().toISOString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Basic response validation",
          "pm.test('Status code is 200', function () {",
          "    pm.response.to.have.status(200);",
          "});",
          "",
          "pm.test('Response has JSON body', function () {",
          "    pm.response.to.be.json;",
          "});",
          "",
          "pm.test('Response time is less than 10000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(10000);",
          "});"
        ]
      }
    }
  ]
}
